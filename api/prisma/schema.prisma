generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum TransactionType {
  TRANSPORT
  OTHERS
  STUDIES
  RESIDENCE
  CREDIT
}

model Expenses {
  id                   String          @id @default(uuid()) @db.Uuid
  description          String
  amount               Decimal         @db.Decimal(10, 2)
  category             TransactionType
  isFixed              Boolean         @default(false)
  numberOfInstallments Int?

  createdAt    DateTime       @default(now()) @db.Timestamptz(6)
  Installments Installments[]

  @@map("expenses")
}

model Installments {
  id                        String   @id @default(uuid()) @db.Uuid
  isPaid                    Boolean  @default(false)
  dueDate                   DateTime @db.Date
  valueInstallmentOfExpense Decimal  @map("value_installment_of_expense") @db.Decimal(10, 2)

  expense    Expenses @relation(fields: [expensesId], references: [id], onDelete: Cascade)
  expensesId String   @map("expenses_id") @db.Uuid

  createdAt DateTime @default(now()) @db.Timestamptz(6)
  updatedAt DateTime @updatedAt @db.Timestamptz(6)

  @@map("installments")
}

model Recipes {
  id          String  @id @default(uuid()) @db.Uuid
  description String
  amount      Decimal @db.Decimal(10, 2)

  createdAt DateTime @default(now()) @db.Timestamptz(6)

  @@map("recipes")
}
